{"ast":null,"code":"import React,{useState}from'react';import{FiDownload,FiUpload}from'react-icons/fi';import backupService from'../services/backupService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BackupRestore=_ref=>{let{onClose}=_ref;const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');const handleExport=async()=>{try{setLoading(true);const data=await backupService.exportData();// Create a blob and download link\nconst blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"task-manager-backup-\".concat(new Date().toISOString().split('T')[0],\".json\");document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);setMessage('Backup exported successfully');setTimeout(()=>setMessage(''),3000);}catch(error){setMessage('Error exporting backup');}finally{setLoading(false);}};const handleImport=async e=>{const file=e.target.files[0];if(!file)return;try{setLoading(true);const text=await file.text();const data=JSON.parse(text);if(!data.tasks||!data.settings){throw new Error('Invalid backup file format');}await backupService.importData(data);setMessage('Backup imported successfully. Please refresh the page.');setTimeout(()=>{setMessage('');window.location.reload();},3000);}catch(error){setMessage('Error importing backup: '+error.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"backup-restore-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"backup-restore-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backup-restore-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Backup & Restore\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-icon\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"backup-restore-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backup-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Export Data\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Download a backup of all your tasks and settings.\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary\",onClick:handleExport,disabled:loading,children:[/*#__PURE__*/_jsx(FiDownload,{}),\" \",loading?'Exporting...':'Export Backup']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"restore-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Import Data\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Restore your tasks and settings from a backup file.\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(FiUpload,{}),\" \",loading?'Importing...':'Import Backup',/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:handleImport,disabled:loading,style:{display:'none'}})]})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})]})});};export default BackupRestore;","map":{"version":3,"names":["React","useState","FiDownload","FiUpload","backupService","jsx","_jsx","jsxs","_jsxs","BackupRestore","_ref","onClose","loading","setLoading","message","setMessage","handleExport","data","exportData","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","link","document","createElement","href","download","concat","Date","toISOString","split","body","appendChild","click","removeChild","revokeObjectURL","setTimeout","error","handleImport","e","file","target","files","text","parse","tasks","settings","Error","importData","window","location","reload","className","children","onClick","disabled","accept","onChange","style","display"],"sources":["/home/vandol/projects/taskzai/task-manager-frontend/src/components/BackupRestore.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { FiDownload, FiUpload } from 'react-icons/fi';\nimport backupService from '../services/backupService';\n\nconst BackupRestore = ({ onClose }) => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const handleExport = async () => {\n    try {\n      setLoading(true);\n      const data = await backupService.exportData();\n      \n      // Create a blob and download link\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `task-manager-backup-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n      \n      setMessage('Backup exported successfully');\n      setTimeout(() => setMessage(''), 3000);\n    } catch (error) {\n      setMessage('Error exporting backup');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleImport = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    try {\n      setLoading(true);\n      const text = await file.text();\n      const data = JSON.parse(text);\n      \n      if (!data.tasks || !data.settings) {\n        throw new Error('Invalid backup file format');\n      }\n      \n      await backupService.importData(data);\n      \n      setMessage('Backup imported successfully. Please refresh the page.');\n      setTimeout(() => {\n        setMessage('');\n        window.location.reload();\n      }, 3000);\n    } catch (error) {\n      setMessage('Error importing backup: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"backup-restore-overlay\">\n      <div className=\"backup-restore-container\">\n        <div className=\"backup-restore-header\">\n          <h2>Backup & Restore</h2>\n          <button className=\"btn-icon\" onClick={onClose}>\n            Ã—\n          </button>\n        </div>\n        \n        <div className=\"backup-restore-content\">\n          <div className=\"backup-section\">\n            <h3>Export Data</h3>\n            <p>Download a backup of all your tasks and settings.</p>\n            <button\n              className=\"btn-primary\"\n              onClick={handleExport}\n              disabled={loading}\n            >\n              <FiDownload /> {loading ? 'Exporting...' : 'Export Backup'}\n            </button>\n          </div>\n          \n          <div className=\"restore-section\">\n            <h3>Import Data</h3>\n            <p>Restore your tasks and settings from a backup file.</p>\n            <label className=\"btn-secondary\">\n              <FiUpload /> {loading ? 'Importing...' : 'Import Backup'}\n              <input\n                type=\"file\"\n                accept=\".json\"\n                onChange={handleImport}\n                disabled={loading}\n                style={{ display: 'none' }}\n              />\n            </label>\n          </div>\n          \n          {message && <div className=\"message\">{message}</div>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BackupRestore;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}